;
; Practica5.asm
;
; Created: 25/02/2019 01:14:00 p. m.
; Author : mygtg
;


; Replace with your application code
LDI R16, 0xFF
OUT DDRD, R16
LDI R16, 0x00 ;Puerto C y numero de 4 bits
LDI R20, 0x00 ;Puerto B y numero de 5 bits, el menos significativo  es el push buton
OUT DDRC, R16
OUT DDRB, R20
LDI R27, $01
LDI R26, $55
LDI R19, 0x00
JMP START

START:
	IN R20, PINC
	LSR R20
	BRCS METEDATO
	LSR R20
	BRCS SACADATO
	JMP START

METEDATO:
	IN R20, PINC
	LSR R20
	BRCS METEDATO
	INC R19
	LSR R20
	IN R16, PINB
	LSL R16
	LSL R16
	OR R20, R16
	ST X+, R20
	JMP DELAY3
	JMP START

SACADATO:
	IN R20, PINC
	LSR R20
	LSR R20
	BRCS SACADATO
	CPI R19, 0x00
	BREQ PARPADEA
	LD R21, -X 
	OUT PORTD, R21
	DEC R19
	JMP DELAY3
	JMP START

PARPADEA:
	IN R20, PINC
	LSR R20
	BRCS METEDATO
	LDI R24, 0xFF
	LDI R25, 0xFF
	OUT PORTD, R25
DELAY1:
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	DEC R25
	BRNE DELAY1
	DEC R24
	BRNE DELAY1
	OUT PORTD, R25
	LDI R24, 0xFF
	LDI R25, 0xFF
DELAY2:
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	DEC R25
	BRNE DELAY2
	DEC R24
	BRNE DELAY2
	JMP PARPADEA

DELAY3:

	LDI R25, 0xFF
	RR1:
	LDI R23, 0xFF
	RR:
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	DEC R25
	BRNE RR
	DEC R24
	BRNE RR1

	JMP START

